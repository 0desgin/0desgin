<!DOCTYPE html>
<html>
<head>
  <title>JavaScript拖放示例（可以来回拖拽）</title>
  <style>
    .dragging {
      opacity: 0.5;
      cursor: grab;
    }
    .dropzone {
      border: 1px solid black;
      height: 100px;
      width: 200px;
      padding: 10px;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <div id="dragme" draggable="true">拖我</div>
  <div class="dropzone">把我放到这里</div>
  <div class="dropzone">或者把我放到这里</div>
  
  <script>
    var dragMe = document.getElementById('dragme');
    var dropzones = document.querySelectorAll('.dropzone');
    
    dragMe.addEventListener('dragstart', handleDragStart);
    dragMe.addEventListener('dragend', handleDragEnd);
    dropzones.forEach(dropzone => {
      dropzone.addEventListener('dragenter', handleDragEnter);
      dropzone.addEventListener('dragover', handleDragOver);
      dropzone.addEventListener('dragleave', handleDragLeave);
      dropzone.addEventListener('drop', handleDrop);
    });
    
    function handleDragStart(event) {
      event.target.classList.add('dragging');
    }
    
    function handleDragEnd(event) {
      event.target.classList.remove('dragging');
    }
    
    function handleDragEnter(event) {
      event.preventDefault();
      event.target.classList.add('hover');
    }
    
    function handleDragOver(event) {
      event.preventDefault();
      event.dataTransfer.dropEffect = 'move';
    }
    
    function handleDragLeave(event) {
      event.target.classList.remove('hover');
    }
    
    function handleDrop(event) {
      event.preventDefault();
      event.target.classList.remove('hover');
      var draggedElement = document.querySelector('.dragging');
      if (draggedElement.parentNode !== event.target) {
        event.target.appendChild(draggedElement);
      } else {
        var siblingElement = getSiblingElement(event.target, draggedElement);
        event.target.insertBefore(draggedElement, siblingElement);
      }
    }
    
    function getSiblingElement(dropzone, draggedElement) {
      var children = Array.from(dropzone.children);
      var draggedIndex = children.indexOf(draggedElement);
      if (draggedIndex === 0) {
        return children[draggedIndex + 1];
      } else {
        return children[draggedIndex - 1];
      }
    }
  </script>
</body>
</html>
